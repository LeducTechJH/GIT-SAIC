package gov.dlf.logic;

import gov.dlf.facade.*;
import gov.dlf.presentation.*;

import net.maintrend.datamanager.*;
import net.maintrend.interfaces.*;
import net.maintrend.interlink.*;
import net.maintrend.rallyengine.*;
import net.maintrend.util.*;

/**
 * __Comment
 *
 * Generated by Rally-to-Java Convertor. MainTrend Ltd.
 */
public class BUSCAR_SOLICITUD_ADL extends ADL
{
	// -------------------------------------------------------------------
	// ---------- Class Attributes -----------------------------------

	/**  */
	public static boolean staticCall = false;

	public static String CONTROL = "";

	// -------------------------------------------------------------------
	// ---------- Instance Attributes --------------------------------

	/**  */
	public SAIC_DMQ_ORA_Application app;
	/**  */
	public RallyDataManager dm = null;

	// -------------------------------------------------------------------
	// ---------- Instance Condition Attributes ----------------------

	public int sw = 0;

	// -------------------------------------------------------------------
	// ---------- Instance Export Attributes -------------------------

	public double SIBIF = 0;

	public double MV = 0;

	public double STATUS = 0;

	public DataStore IMPORTADOS_SIBIF_DSD = null;

	public DataStore MV_SOLICITUDES_DSD = null;

	// -------------------------------------------------------------------
	// ---------- Instance Attributes' Access Methods ----------------

	/**  */
	public static void setSIBIF(RallyApplication __app, Parameter value)
	{
		((BUSCAR_SOLICITUD_ADL) __app.getADL(BUSCAR_SOLICITUD_ADL.class)).SIBIF = value.getDouble();
	}

	public static void setMV(RallyApplication __app, Parameter value)
	{
		((BUSCAR_SOLICITUD_ADL) __app.getADL(BUSCAR_SOLICITUD_ADL.class)).MV = value.getDouble();
	}

	/**  */
	public static void setSTATUS(RallyApplication __app, Parameter value)
	{
		((BUSCAR_SOLICITUD_ADL) __app.getADL(BUSCAR_SOLICITUD_ADL.class)).STATUS = value.getDouble();
	}

	/**  */
	public static DataStore getIMPORTADOS_SIBIF_DSD(RallyApplication __app)
	{
		return ((BUSCAR_SOLICITUD_ADL) __app.getADL(BUSCAR_SOLICITUD_ADL.class)).IMPORTADOS_SIBIF_DSD;
	}

	/**  */
	public static void setIMPORTADOS_SIFIF_DSD(RallyApplication __app, DataStore value)
	{
		((BUSCAR_SOLICITUD_ADL) __app.getADL(BUSCAR_SOLICITUD_ADL.class)).IMPORTADOS_SIBIF_DSD = value;
	}

	/**  */
	public static void setIMPORTADOS_SIBIF_DSD(RallyApplication __app, Object value)
	{
		((BUSCAR_SOLICITUD_ADL) __app.getADL(BUSCAR_SOLICITUD_ADL.class)).IMPORTADOS_SIBIF_DSD = (DataStore) value;
	}

	/**  */
	public static DataStore getMV_SOLICITUDES_DSD(RallyApplication __app)
	{
		return ((BUSCAR_SOLICITUD_ADL) __app.getADL(BUSCAR_SOLICITUD_ADL.class)).MV_SOLICITUDES_DSD;
	}

	/**  */
	public static void setMV_SOLICITUDES_DSD(RallyApplication __app, DataStore value)
	{
		((BUSCAR_SOLICITUD_ADL) __app.getADL(BUSCAR_SOLICITUD_ADL.class)).MV_SOLICITUDES_DSD = value;
	}

	/**  */
	public static void setMV_SOLICITUDES_DSD(RallyApplication __app, Object value)
	{
		((BUSCAR_SOLICITUD_ADL) __app.getADL(BUSCAR_SOLICITUD_ADL.class)).MV_SOLICITUDES_DSD = (DataStore) value;
	}

	/**  */
	public static double getSIBIF(RallyApplication __app)
	{
		return ((BUSCAR_SOLICITUD_ADL) __app.getADL(BUSCAR_SOLICITUD_ADL.class)).SIBIF;
	}

	public static double getMV(RallyApplication __app)
	{
		return ((BUSCAR_SOLICITUD_ADL) __app.getADL(BUSCAR_SOLICITUD_ADL.class)).MV;
	}

	/**  */
	public static Double getSIBIFDouble(RallyApplication __app)
	{
		return new Double(((BUSCAR_SOLICITUD_ADL) __app.getADL(BUSCAR_SOLICITUD_ADL.class)).SIBIF);
	}

	public static Double getMVDouble(RallyApplication __app)
	{
		return new Double(((BUSCAR_SOLICITUD_ADL) __app.getADL(BUSCAR_SOLICITUD_ADL.class)).MV);
	}

	/**  */
	public static void setSIBIF(RallyApplication __app, double value)
	{
		((BUSCAR_SOLICITUD_ADL) __app.getADL(BUSCAR_SOLICITUD_ADL.class)).SIBIF = value;
	}

	public static void setMV(RallyApplication __app, double value)
	{
		((BUSCAR_SOLICITUD_ADL) __app.getADL(BUSCAR_SOLICITUD_ADL.class)).MV = value;
	}

	/**  */
	public static void setSIBIF(RallyApplication __app, Object value)
	{
		((BUSCAR_SOLICITUD_ADL) __app.getADL(BUSCAR_SOLICITUD_ADL.class)).SIBIF = ((Double) value).doubleValue();
	}

	public static void setMV(RallyApplication __app, Object value)
	{
		((BUSCAR_SOLICITUD_ADL) __app.getADL(BUSCAR_SOLICITUD_ADL.class)).MV = ((Double) value).doubleValue();
	}

	/**  */
	public static double getSTATUS(RallyApplication __app)
	{
		return ((NOTIF_CHECK_SSN_ADL) __app.getADL(NOTIF_CHECK_SSN_ADL.class)).STATUS;
	}

	/**  */
	public static Double getSTATUSDouble(RallyApplication __app)
	{
		return new Double(((NOTIF_CHECK_SSN_ADL) __app.getADL(NOTIF_CHECK_SSN_ADL.class)).STATUS);
	}

	/**  */
	public static void setSTATUS(RallyApplication __app, double value)
	{
		((NOTIF_CHECK_SSN_ADL) __app.getADL(NOTIF_CHECK_SSN_ADL.class)).STATUS = value;
	}

	/**  */
	public static void setSTATUS(RallyApplication __app, Object value)
	{
		((NOTIF_CHECK_SSN_ADL) __app.getADL(NOTIF_CHECK_SSN_ADL.class)).STATUS = ((Double) value).doubleValue();
	}

	/**  */

	// -------------------------------------------------------------------
	// ---------- Methods --------------------------------------------

	/**
	 * 
	 * @param __app
	 * @return
	 */
	public static BUSCAR_SOLICITUD_ADL get(RallyApplication __app)
	{
		BUSCAR_SOLICITUD_ADL adl = new BUSCAR_SOLICITUD_ADL();
		__app.register(adl, "BUSCAR_SOLICITUD_ADL");
		__app.setADL(BUSCAR_SOLICITUD_ADL.class, adl);
		adl.setApplication(__app);
		return adl;
	}

	/**
	 *
	 * @param __app
	 * @param ps
	 *
	 * @return
	 */
	public static void exec(RallyApplication __app, ParameterSet ps)
	{
		BUSCAR_SOLICITUD_ADL.get(__app).process(ps);
	}

	/**
	 *
	 * @param __app
	 *
	 * @return
	 */
	public static void exec(RallyApplication __app)
	{
		ParameterSet ps = null;
		BUSCAR_SOLICITUD_ADL.exec(__app, ps);
	}

	/**
	 * Overrides the ancestor's method
	 * 
	 * @param __app
	 */
	public void setApplication(RallyApplication __app)
	{
		this.app = (SAIC_DMQ_ORA_Application) __app;
		if (this.app != null)
		{
			this.dm = (RallyDataManager) this.app.getDataManager();
		}
	}

	/**
	 * Overrides the ancestor's method
	 * 
	 * @param parms
	 */
	public void execute(ParameterSet parms)
	{
		this.process(parms);
	}

	/**
	 *
	 */
	protected void doReturn()
	{
		this.unregister();
	}

	/**
	 *
	 */
	public void unregister()
	{
		this.app.unregister(this);
		IRegisteredObject rObj = this.app.get("BUSCAR_SOLICITUD_ADL");
		if (rObj != null && rObj instanceof BUSCAR_SOLICITUD_ADL)
		{
			this.app.setADL(BUSCAR_SOLICITUD_ADL.class, (BUSCAR_SOLICITUD_ADL) rObj);
		}
	}

	/**
	 * Overrides the ancestor's method
	 * 
	 * @param ps
	 */
	protected void process(ParameterSet ps)
	{
		Debug.println(Debug.TRACE, "BUSCAR_SOLICITUD_ADL Step " + this.currentStep);
		super.process(ps);

		CONTROL = this.app.form("BUSCAR_SOLICITUD_FR").getStringItem("CONTROL");

		if (Compare.equals(CONTROL, null))
		{
			this.app.setError("0", "Número de solicitud no es valido");
		}

		else
		{
			IMPORTADOS_SIBIF_DSD = this.dm.create("IMPORTADOS_SIBIF_DSD");
			SIBIF = IMPORTADOS_SIBIF_DSD.getId();
			STATUS = RallyDataStoreException.getDefault();

			if (!Compare.equals(STATUS, 0))
			{
				this.app.setError(0, STATUS);

				STATUS = this.dm.rollBack();
				STATUS = this.dm.dbClose(SIBIF);

				this.app.errorFlag = false;

				this.app.returnTo("BUSCAR_SOLICITUD_PKT");
				if (true)
					return;
			}

			STATUS = this.dm.reset(SIBIF);

			this.dm.setField(this.dm.get("IMPORTADOS_SIBIF_DSD"), "NUMERO_SOLICITUD", CONTROL);

			STATUS = this.dm.limitQueryFromBuffer(SIBIF);
			STATUS = this.dm.retrieve(SIBIF);

			STATUS = this.dm.firstRow(SIBIF);

			if (Compare.equals(STATUS, 0))
			{
				this.app.NUMERO_SOLICITUD_GBL = this.dm.getFieldString(this.dm.get("IMPORTADOS_SIBIF_DSD"),
						"NUMERO_SOLICITUD");
				this.app.SSN_JEFE_FAM_GBL = this.dm.getFieldDouble(this.dm.get("IMPORTADOS_SIBIF_DSD"),
						"SEGURO_SOCIAL_JEFE_FAM");

				STATUS = this.dm.rollBack();
				STATUS = this.dm.dbClose(SIBIF);

				sw = 1;

			}

			if (Compare.equals(sw, 0))
			{
				MV_SOLICITUDES_DSD = this.dm.create("MV_SOLICITUDES_DSD");
				MV = MV_SOLICITUDES_DSD.getId();
				STATUS = RallyDataStoreException.getDefault();

				if (!Compare.equals(STATUS, 0))
				{
					this.app.setError(0, STATUS);

					STATUS = this.dm.rollBack();
					STATUS = this.dm.dbClose(MV);

					this.app.errorFlag = false;

					this.app.returnTo("BUSCAR_SOLICITUD_PKT");
					if (true)
						return;
				}

				STATUS = this.dm.reset(MV);

				this.dm.setField(this.dm.get("MV_SOLICITUDES_DSD"), "NumeroSolicitud", CONTROL);

				STATUS = this.dm.limitQueryFromBuffer(MV);
				STATUS = this.dm.retrieve(MV);

				STATUS = this.dm.firstRow(MV);

				if (Compare.equals(STATUS, 0))
				{
					this.app.NUMERO_SOLICITUD_GBL = this.dm.getFieldString(this.dm.get("MV_SOLICITUDES_DSD"),
							"NumeroSolicitud");

					STATUS = this.dm.rollBack();
					STATUS = this.dm.dbClose(MV);

					sw = 2;

				}
			}

			if (Compare.equals(sw, 0))
			{
				this.app.setError("0", "Número de solicitud no es valido");
			}

		}

		Debug.println(Debug.TRACE, "BUSCAR_SOLICITUD_ADL ended");
		this.unregister();

		if (Compare.equals(sw, 1))
		{
			RESULTADO_BUSCAR_SOLICITUD_1_PKT.exec(this.app);
		}
		if (Compare.equals(sw, 2))
		{
			RESULTADO_BUSCAR_SOLICITUD_2_PKT.exec(this.app);
		}

		return;

	}

}

/*
 * ---------------------------------------------------------------------
 * 
 * PROCEDURE NOTIF_CHECK_SSN_ADL;
 * 
 * VAR CLIENTES : NUMBER(9,0); STATUS : NUMBER(9,0);
 * 
 * BEGIN SET_TRACE(); IF (NOTIFICACIONES_GET_SSN_FR.SEGURO_SOCIAL > 0 ) THEN
 * BEGIN DB_OPEN(CLIENTES_RO_DSD,CLIENTES,STATUS); IF (STATUS <> 0) THEN BEGIN
 * ERROR(STATUS); DB_ROLLBACK(STATUS); DB_CLOSE(CLIENTES,STATUS); SET_FAILURE();
 * RETURN_TO NOTIFICACIONES_GET_SSN_PKT; END; DB_RESET(CLIENTES,STATUS);
 * SS_CLIENTE_GBL:=NOTIFICACIONES_GET_SSN_FR.SEGURO_SOCIAL;
 * 
 * CLIENTES_RO_DSD.SEGURO_SOCIAL_CLIENTE :=
 * NOTIFICACIONES_GET_SSN_FR.SEGURO_SOCIAL;
 * CLIENTES_RO_DSD.RMO_OFICINA:=RMO_GBL; DB_QUERY(CLIENTES,STATUS);
 * 
 * DB_GET_FIRST(CLIENTES,STATUS); IF (STATUS <> 0) THEN BEGIN ERROR(2751);
 * DB_ROLLBACK(STATUS); DB_CLOSE(CLIENTES,STATUS); SET_FAILURE(); RETURN_TO
 * NOTIFICACIONES_GET_SSN_PKT; END; ELSE BEGIN SSN_JEFE_FAM_GBL :=
 * CLIENTES_RO_DSD.SEGURO_SOCIAL_JEFE_FAMILIA; DB_ROLLBACK(STATUS);
 * DB_CLOSE(CLIENTES,STATUS); CALL NOTIFICACIONES_FAM_PKT; END; END; ELSE
 * SET_FAILURE(); SET_NOTRACE(); END;
 * 
 * ---------------------------------------------------------------------
 */
