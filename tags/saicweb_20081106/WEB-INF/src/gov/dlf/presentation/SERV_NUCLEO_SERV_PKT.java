package gov.dlf.presentation;


import gov.dlf.external.*;
import gov.dlf.logic.*;
import gov.dlf.facade.*;


import java.awt.Color;
import java.awt.Container;
import java.awt.Dimension;
import java.awt.BorderLayout;

import java.awt.event.ActionEvent;

import javax.swing.JScrollPane;
import javax.swing.JOptionPane;

import net.maintrend.appmanager.*;
import net.maintrend.interfaces.*;
import net.maintrend.interlink.*;
import net.maintrend.jdatapanel.*;
import net.maintrend.jdatapanel.commands.*;
import net.maintrend.jdatapanel.edit.*;
import net.maintrend.jdatapanel.swing.*;
import net.maintrend.mdi.*;
import net.maintrend.rallyengine.*;
import net.maintrend.util.*;



/**
 * 
 *
 * Generated by Rally-to-Java Convertor. MainTrend Ltd.
 */
public class SERV_NUCLEO_SERV_PKT
     extends FormSheet
{
  // -------------------------------------------------------------------
  // ----------   Class Attributes   -----------------------------------

  /**  */
  public static final long serialVersionUID = 0L;



  // -------------------------------------------------------------------
  // ----------   Constructors and Supporting Methods   ----------------

  /**
   *
   */
  public SERV_NUCLEO_SERV_PKT ( )
  {
    super ( "SERV_NUCLEO_SERV_PKT" );

    this.setEvents ( );
  }


  /**
   *
   */
  public SERV_NUCLEO_SERV_PKT ( String packetTitle )
  {
    super ( packetTitle );

    this.setEvents ( );
  }


  /**
   *
   */
  public SERV_NUCLEO_SERV_PKT ( MDIFrame pFrame )
  {
    super ( "SERV_NUCLEO_SERV_PKT", pFrame );

    this.setEvents ( );
  }


  /**
   *
   */
  public void createComponents ( )
  {
    this.createComponents ( new SERV_NUCLEO_SERV_FRM ( ) );
    this.setLegendText ( LegendRegistry.get ( "30000" ) );
  }



  // -------------------------------------------------------------------
  // ----------   Static Invocation   ----------------------------------

  /**
   *
   */
  public static SERV_NUCLEO_SERV_PKT get ( RallyApplication __app )
  {
    return ( SERV_NUCLEO_SERV_PKT ) __app.getNewInstance ( "SERV_NUCLEO_SERV_PKT" );
  }


  /**
   *
   */
  public static IRegisteredObject exec ( RallyApplication __app )
  {
    SERV_NUCLEO_SERV_PKT fSheet = SERV_NUCLEO_SERV_PKT.get ( __app );
    fSheet.execute ( null );
    Form form = ( Form ) fSheet.getModel ( );
    int iMode = form.getInitialMode ( );
    if ( iMode == ModeStyle.PRINT || iMode == ModeStyle.WRITE )
    {
      String html = __app.getPrintHtml ( form );
      __app.registerClientContent ( html, "printStr" );
      __app.unregister ( form );
      return null;
    }
    return fSheet;
  }


  /**
   *
   */
  public static IRegisteredObject exec ( RallyApplication __app, ParameterSet ps )
  {
    return SERV_NUCLEO_SERV_PKT.exec ( __app );
  }



  // -------------------------------------------------------------------
  // -----------   Actions Support   -----------------------------------

  /**
   *
   */
  public boolean performAction ( String actionName, ActionEvent e )
  {
    return super.performAction ( actionName, e );
  }



  // -------------------------------------------------------------------
  // ----------   Methods   --------------------------------------------

  /**
   *
   */
  public void open ( )
  {
    super.open ( );
    this.formModel.setInitialMode ( ModeStyle.UPDATE );
    this.formModel.setMode ( ModeStyle.UPDATE );
    this.formModel.build ( );
    this.notifyListener ( JDataPanelListener.AFTERLOAD );
  }



  // -------------------------------------------------------------------
  // ----------   Action Sites   ---------------------------------------

  /**
   *
   */
  public void setEvents ( )
  {

    this.formModel.setListener ( JDataPanelListener.AFTEREXIT, new JDataPanelListener ( )
    {
      public boolean eventFired ( String eventName )
      {
        app.errorFlag = true; 
        
        //change 05/10/08 update all services to the current RMO 
        double JEFE_FAM  = formModel.getDoubleValue ( "SEGURO_SOCIAL_JEFE_FAM1" );
        double JEFE_SERV = formModel.getDoubleValue ( "SEGURO_SOCIAL_JEFE_SERV" );
        String service   = formModel.getStringValue ( "COD_SERVICIO"            );
                
        UPDATE_RMO_ADL ura = new UPDATE_RMO_ADL ( ); 
        ura.synchronizeRMO ( ( SAIC_DMQ_ORA_Application ) app, JEFE_FAM, JEFE_SERV, service );
   
        
        app.callCommand ( "COMMIT" );         
        return app.errorFlag;
      }
    } );
    this.formModel.setListener ( JDataPanelListener.AFTERLOAD, new JDataPanelListener ( )
    {
      public boolean eventFired ( String eventName )
      {
        app.errorFlag = true; CHECK_NUM_SERVICIOS_INSERT_ADL.exec ( app ); return app.errorFlag;
      }
    } );
    this.formModel.setListener ( JDataPanelListener.BEFOREQUIT, new JDataPanelListener ( )
    {
      public boolean eventFired ( String eventName )
      {
        app.errorFlag = true; BF_QUIT_SERV_NUCLEO_SERV_ADL.exec ( app ); return app.errorFlag;
      }
    } );
  }
}
