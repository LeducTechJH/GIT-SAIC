package gov.dlf.presentation;


import gov.dlf.facade.SAIC_DMQ_ORA_Application;
import gov.dlf.logic.ACTUALIZAR_FCH_DESACTIVADO_TSS_ADL;
import gov.dlf.logic.CONTRATO_CUIDO_ALIST;

import net.maintrend.appmanager.Application;
import net.maintrend.jdatapanel.JDataPanelListener;
import net.maintrend.rallyengine.Form;
import net.maintrend.rallyengine.RallyApplication;
import net.maintrend.util.Debug;
import net.maintrend.util.ResourceUtil;



/**
 * __Comment
 *
 * Generated by Rally-to-Java Convertor. MainTrend Ltd.
 */
public class MANTENIMIENTO_TECNICO_FR
extends Form
{
	// -------------------------------------------------------------------
	// ----------   Instance Attributes   --------------------------------

	/**  */
	public SAIC_DMQ_ORA_Application app;



	// -------------------------------------------------------------------
	// ----------   Constructors and supporting methods   ----------------

	/**
	 *
	 */
	public MANTENIMIENTO_TECNICO_FR ( )
	{
		super ( );
		this.setName ( "MANTENIMIENTO_TECNICO_FR" );

		Debug.println ( Debug.TRACE, "MANTENIMIENTO_TECNICO_FR - constructor" );

		this.setDefinitionPath ( "gov/dlf/presentation/MANTENIMIENTO_TECNICO_FR.jdp" );
		String definition = ResourceUtil.getResourceText ( this.definitionPath );
		this.setDefinition     ( definition );

		this.setHighLightSelected   ( false );
		this.compressFieldLocations ( false, true );  // Compresses only Y-locations
	}


	/**
	 * Overrides ancestor's script
	 *
	 * @param __app
	 */
	public void setApplication ( Application __app )
	{
		this.app = ( SAIC_DMQ_ORA_Application ) __app;
		if ( this.app != null )
		{
			this.setDataManager ( this.app.getDataManager ( ) );
		}

		this.setObjectEvents ( );
	}


	/**
	 * Overrides ancestor's method
	 * 
	 * @return
	 */
	public RallyApplication getApplication ( )
	{
		return this.app;
	}



	// -------------------------------------------------------------------
	// ----------   Action Sites   ---------------------------------------

	/**
	 *
	 */
	public void setObjectEvents ( )
	{
		this.registerListener ( "BIOGRAFICA_TECNICO", JDataPanelListener.AFTERINSERTINSTANCE, new JDataPanelListener ( )
		{
			public boolean eventFired ( String eventName )
			{
				app.errorFlag = true;
				__form.nextPage ( );
				return app.errorFlag;
			}
		} );
		this.registerListener ( "FLG_DESACTIVADO", JDataPanelListener.AFTERVALUECHANGE, new JDataPanelListener ( )
		{
			public boolean eventFired ( String eventName )
			{
				app.errorFlag = true; 
				ACTUALIZAR_FCH_DESACTIVADO_TSS_ADL.exec ( app, null );
				return app.errorFlag;
			}
		} );
		this.registerListener ( "FLG_DESACTIVADO", JDataPanelListener.BEFORELEAVE, new JDataPanelListener ( )
		{
			public boolean eventFired ( String eventName )
			{
				app.errorFlag = true; 
				String flg =  app.form("MANTENIMIENTO_TECNICO_FR").getStringItem( "FLG_DESACTIVADO" );
				if (  flg.equals ( "S" ) ||  flg.equals ( "N" ) )
				{
					//OK
				}
				else
				{
					app.setError ("0", "El campo desactivado debe tener S o N.");
					app.errorFlag = false;
				}
				return app.errorFlag;
			}
		} );
	}
}








