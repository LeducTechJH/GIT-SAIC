package gov.dlf.logic;


import gov.dlf.external.*;
import gov.dlf.facade.*;
import gov.dlf.presentation.*;


import java.util.*;

import net.maintrend.appmanager.*;
import net.maintrend.datamanager.*;
import net.maintrend.interfaces.*;
import net.maintrend.interlink.*;
import net.maintrend.mdi.*;
import net.maintrend.rallyengine.*;
import net.maintrend.util.*;
import net.maintrend.util.format.*;



/**
 * __Comment
 *
 * Generated by Rally-to-Java Convertor. MainTrend Ltd.
 */
public class REPORT_3_1_ADL
     extends ADL
{
  // -------------------------------------------------------------------
  // ----------   Class Attributes   -----------------------------------

  /**  */
  public static boolean staticCall = true;



  // -------------------------------------------------------------------
  // ----------   Instance Attributes   --------------------------------

  /**  */
  public SAIC_DMQ_ORA_Application app;
  /**  */
  public RallyDataManager dm = null;



  // -------------------------------------------------------------------
  // ----------   Instance Condition Attributes   ----------------------

 

  // -------------------------------------------------------------------
  // ----------   Instance Export Attributes   -------------------------

  public double SUPERVISOR_ID = 0;

  public double TECNICO_ID = 0;

  public double SERVICIOS_TOTAL = 0;

  public double SERVICIOS_PAN = 0;

  public double SERVICIOS_AE = 0;

  public double VOLUMEN_TOTAL = 0;

  public double STATUS = 0;

  public double NULLCHK = 0;



  public DataStore REPORT_3_1_ADL_DSD = null;



  // -------------------------------------------------------------------
  // ----------   Instance Attributes' Access Methods   ----------------

  
  /**  */
  public static void setSUPERVISOR_ID  ( RallyApplication __app, Parameter value )
  {
    ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).SUPERVISOR_ID = value.getDouble ( );
  }  

  
  /**  */
  public static void setTECNICO_ID  ( RallyApplication __app, Parameter value )
  {
    ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).TECNICO_ID = value.getDouble ( );
  }  

  
  /**  */
  public static void setSERVICIOS_TOTAL  ( RallyApplication __app, Parameter value )
  {
    ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).SERVICIOS_TOTAL = value.getDouble ( );
  }  

  
  /**  */
  public static void setSERVICIOS_PAN  ( RallyApplication __app, Parameter value )
  {
    ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).SERVICIOS_PAN = value.getDouble ( );
  }  

  
  /**  */
  public static void setSERVICIOS_AE  ( RallyApplication __app, Parameter value )
  {
    ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).SERVICIOS_AE = value.getDouble ( );
  }  

  
  /**  */
  public static void setVOLUMEN_TOTAL  ( RallyApplication __app, Parameter value )
  {
    ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).VOLUMEN_TOTAL = value.getDouble ( );
  }  

  
  /**  */
  public static void setSTATUS  ( RallyApplication __app, Parameter value )
  {
    ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).STATUS = value.getDouble ( );
  }  

  
  /**  */
  public static void setNULLCHK  ( RallyApplication __app, Parameter value )
  {
    ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).NULLCHK = value.getDouble ( );
  }  
    


  /**  */
  public static DataStore getREPORT_3_1_ADL_DSD  ( RallyApplication __app )
  {
    return ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).REPORT_3_1_ADL_DSD;
  }


  /**  */
  public static void setREPORT_3_1_ADL_DSD  ( RallyApplication __app, DataStore value )
  {
    ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).REPORT_3_1_ADL_DSD = value;
  }


  /**  */
  public static void setREPORT_3_1_ADL_DSD  ( RallyApplication __app, Object value )
  {
    ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).REPORT_3_1_ADL_DSD = ( DataStore ) value;
  }




  /**  */
  public static double getSUPERVISOR_ID  ( RallyApplication __app )
  {
    return ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).SUPERVISOR_ID;
  }


  /**  */
  public static Double getSUPERVISOR_IDDouble ( RallyApplication __app )
  {
    return new Double ( ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).SUPERVISOR_ID );
  }


  /**  */
  public static void setSUPERVISOR_ID  ( RallyApplication __app, double value )
  {
    ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).SUPERVISOR_ID = value;
  }


  /**  */
  public static void setSUPERVISOR_ID  ( RallyApplication __app, Object value )
  {
    ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).SUPERVISOR_ID = ( ( Double ) value ).doubleValue ( );
  }


  /**  */
  public static double getTECNICO_ID  ( RallyApplication __app )
  {
    return ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).TECNICO_ID;
  }


  /**  */
  public static Double getTECNICO_IDDouble ( RallyApplication __app )
  {
    return new Double ( ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).TECNICO_ID );
  }


  /**  */
  public static void setTECNICO_ID  ( RallyApplication __app, double value )
  {
    ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).TECNICO_ID = value;
  }


  /**  */
  public static void setTECNICO_ID  ( RallyApplication __app, Object value )
  {
    ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).TECNICO_ID = ( ( Double ) value ).doubleValue ( );
  }


  /**  */
  public static double getSERVICIOS_TOTAL  ( RallyApplication __app )
  {
    return ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).SERVICIOS_TOTAL;
  }


  /**  */
  public static Double getSERVICIOS_TOTALDouble ( RallyApplication __app )
  {
    return new Double ( ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).SERVICIOS_TOTAL );
  }


  /**  */
  public static void setSERVICIOS_TOTAL  ( RallyApplication __app, double value )
  {
    ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).SERVICIOS_TOTAL = value;
  }


  /**  */
  public static void setSERVICIOS_TOTAL  ( RallyApplication __app, Object value )
  {
    ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).SERVICIOS_TOTAL = ( ( Double ) value ).doubleValue ( );
  }


  /**  */
  public static double getSERVICIOS_PAN  ( RallyApplication __app )
  {
    return ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).SERVICIOS_PAN;
  }


  /**  */
  public static Double getSERVICIOS_PANDouble ( RallyApplication __app )
  {
    return new Double ( ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).SERVICIOS_PAN );
  }


  /**  */
  public static void setSERVICIOS_PAN  ( RallyApplication __app, double value )
  {
    ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).SERVICIOS_PAN = value;
  }


  /**  */
  public static void setSERVICIOS_PAN  ( RallyApplication __app, Object value )
  {
    ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).SERVICIOS_PAN = ( ( Double ) value ).doubleValue ( );
  }


  /**  */
  public static double getSERVICIOS_AE  ( RallyApplication __app )
  {
    return ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).SERVICIOS_AE;
  }


  /**  */
  public static Double getSERVICIOS_AEDouble ( RallyApplication __app )
  {
    return new Double ( ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).SERVICIOS_AE );
  }


  /**  */
  public static void setSERVICIOS_AE  ( RallyApplication __app, double value )
  {
    ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).SERVICIOS_AE = value;
  }


  /**  */
  public static void setSERVICIOS_AE  ( RallyApplication __app, Object value )
  {
    ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).SERVICIOS_AE = ( ( Double ) value ).doubleValue ( );
  }


  /**  */
  public static double getVOLUMEN_TOTAL  ( RallyApplication __app )
  {
    return ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).VOLUMEN_TOTAL;
  }


  /**  */
  public static Double getVOLUMEN_TOTALDouble ( RallyApplication __app )
  {
    return new Double ( ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).VOLUMEN_TOTAL );
  }


  /**  */
  public static void setVOLUMEN_TOTAL  ( RallyApplication __app, double value )
  {
    ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).VOLUMEN_TOTAL = value;
  }


  /**  */
  public static void setVOLUMEN_TOTAL  ( RallyApplication __app, Object value )
  {
    ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).VOLUMEN_TOTAL = ( ( Double ) value ).doubleValue ( );
  }


  /**  */
  public static double getSTATUS  ( RallyApplication __app )
  {
    return ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).STATUS;
  }


  /**  */
  public static Double getSTATUSDouble ( RallyApplication __app )
  {
    return new Double ( ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).STATUS );
  }


  /**  */
  public static void setSTATUS  ( RallyApplication __app, double value )
  {
    ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).STATUS = value;
  }


  /**  */
  public static void setSTATUS  ( RallyApplication __app, Object value )
  {
    ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).STATUS = ( ( Double ) value ).doubleValue ( );
  }


  /**  */
  public static double getNULLCHK  ( RallyApplication __app )
  {
    return ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).NULLCHK;
  }


  /**  */
  public static Double getNULLCHKDouble ( RallyApplication __app )
  {
    return new Double ( ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).NULLCHK );
  }


  /**  */
  public static void setNULLCHK  ( RallyApplication __app, double value )
  {
    ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).NULLCHK = value;
  }


  /**  */
  public static void setNULLCHK  ( RallyApplication __app, Object value )
  {
    ( ( REPORT_3_1_ADL ) __app.getADL ( REPORT_3_1_ADL.class ) ).NULLCHK = ( ( Double ) value ).doubleValue ( );
  }



  // -------------------------------------------------------------------
  // ----------   Methods   --------------------------------------------

  /**
   * 
   * @param __app
   * @return
   */
  public static REPORT_3_1_ADL get ( RallyApplication __app )
  {
    REPORT_3_1_ADL adl = new REPORT_3_1_ADL ( );
    __app.register ( adl, "REPORT_3_1_ADL" );
    __app.setADL ( REPORT_3_1_ADL.class, adl ); 
    adl.setApplication ( __app );
    return adl;
  }


  /**
   *
   * @param __app
   * @param ps
   *
   * @return
   */
  public static void exec ( RallyApplication __app, ParameterSet ps )
  {
    REPORT_3_1_ADL.get ( __app ).process ( ps );
  }


  /**
   *
   * @param __app
   *
   * @return
   */
  public static void exec ( RallyApplication __app )
  {
    ParameterSet ps = null;
    REPORT_3_1_ADL.exec ( __app, ps );
  }


  /**
   * Overrides the ancestor's method
   * 
   * @param __app
   */
  public void setApplication ( RallyApplication __app )
  {
    this.app = ( SAIC_DMQ_ORA_Application ) __app;
    if ( this.app != null )
    {
      this.dm = ( RallyDataManager ) this.app.getDataManager ( );
    }
  }


  /**
   * Overrides the ancestor's method
   * 
   * @param parms
   */
  public void execute ( ParameterSet parms )
  {
    this.process ( parms );
  }


  /**
   * Populating the parameter set object with return values
   */
  protected void returnParms ( ParameterSet ps, double SUPERVISOR_ID, double TECNICO_ID, double SERVICIOS_TOTAL, double SERVICIOS_PAN, double SERVICIOS_AE, double VOLUMEN_TOTAL )
  {
    ps.reset ( );
    ps.set ( SUPERVISOR_ID );
    ps.set ( TECNICO_ID );
    ps.set ( SERVICIOS_TOTAL );
    ps.set ( SERVICIOS_PAN );
    ps.set ( SERVICIOS_AE );
    ps.set ( VOLUMEN_TOTAL );
  }




  /**
   *
   */
  protected void doReturn ( )
  {
    this.unregister ( );
  }


  /**
   *
   */
  public void unregister ( )
  {
    this.app.unregister ( this );
    IRegisteredObject rObj = this.app.get ( "REPORT_3_1_ADL" );
    if ( rObj != null && rObj instanceof REPORT_3_1_ADL )
    {
      this.app.setADL ( REPORT_3_1_ADL.class, ( REPORT_3_1_ADL ) rObj );
    }
  }


  /**
   * Overrides the ancestor's method
   * 
   * @param ps
   */
  protected void process ( ParameterSet ps )
  {
    Debug.println ( Debug.TRACE, "REPORT_3_1_ADL Step " + this.currentStep );
    super.process ( ps );
    switch ( this.currentStep ) 
    {
      case 0:  { this.currentStep ++; this.step0 ( this.keyParms ); break; }
      default: 
      { 
        this.currentStep = 0;
        Debug.println ( Debug.TRACE, "REPORT_3_1_ADL ended" );
        this.unregister ( );
        break;
      }
    }
    if ( this.currentStep > 0 ) this.app.goOn ( );
  }



  /**
   *
   */
  protected void step0 ( ParameterSet ps )
  {
    ps.reset ( );
    SUPERVISOR_ID = ps.getDouble( );
    TECNICO_ID = ps.getDouble( );
    SERVICIOS_TOTAL = ps.getDouble( );
    SERVICIOS_PAN = ps.getDouble( );
    SERVICIOS_AE = ps.getDouble( );
    VOLUMEN_TOTAL = ps.getDouble( );

    SERVICIOS_TOTAL = 0;
    SERVICIOS_PAN = 0;
    SERVICIOS_AE = 0;
    VOLUMEN_TOTAL = 0;
    NULLCHK = TruncService.setNull ( NULLCHK  );

    STATUS  = this.dm.reset ( REPORT_3_1_1_ADL.getSUPERVISOR_SERVICIOS_TABLE ( this.app ) );

    this.dm.setField ( this.dm.get ( "REPORT_3_1_ADL_DSD" ), "ID_SUPERVISOR", SUPERVISOR_ID );
    this.dm.setField ( this.dm.get ( "REPORT_3_1_ADL_DSD" ), "ID_TECNICO", TECNICO_ID );

    STATUS  = this.dm.limitQueryFromBuffer ( REPORT_3_1_1_ADL.getSUPERVISOR_SERVICIOS_TABLE ( this.app ) );
    STATUS  = this.dm.retrieve ( REPORT_3_1_1_ADL.getSUPERVISOR_SERVICIOS_TABLE ( this.app ) );

    STATUS  = this.dm.firstRow ( REPORT_3_1_1_ADL.getSUPERVISOR_SERVICIOS_TABLE ( this.app ) );

    while ( ! Compare.equals ( STATUS, RallyDataStoreExceptionType.EOS ) ) 
    {
      if ( Compare.equals ( STATUS, 0 ) ) 
      {
        if ( Compare.equals ( this.dm.getFieldString ( this.dm.get ( "REPORT_3_1_ADL_DSD" ), "COD_SERVICIO" ), "PAN" ) ) 
        {
          SERVICIOS_PAN = MathService.plus ( SERVICIOS_PAN, 1  );
        }
        if ( Compare.equals ( RallyStringService.subString ( this.dm.getFieldString ( this.dm.get ( "REPORT_3_1_ADL_DSD" ), "COD_SERVICIO" ), 0, 2 ), "AE" ) ) 
        {
          SERVICIOS_AE = MathService.plus ( SERVICIOS_AE, 1  );
        }
        SERVICIOS_TOTAL = MathService.plus ( SERVICIOS_TOTAL, 1  );
        if ( ! Compare.equals ( this.dm.getFieldDouble ( this.dm.get ( "REPORT_3_1_ADL_DSD" ), "WEIGHT_SERVICE" ), NULLCHK ) ) 
        {
          VOLUMEN_TOTAL = MathService.plus ( VOLUMEN_TOTAL, this.dm.getFieldDouble ( this.dm.get ( "REPORT_3_1_ADL_DSD" ), "WEIGHT_SERVICE" )  );
        }

        STATUS  = this.dm.nextRow ( REPORT_3_1_1_ADL.getSUPERVISOR_SERVICIOS_TABLE ( this.app ) );

      }
    }
    this.returnParms ( ps, SUPERVISOR_ID, TECNICO_ID, SERVICIOS_TOTAL, SERVICIOS_PAN, SERVICIOS_AE, VOLUMEN_TOTAL );

  }
}



/* ---------------------------------------------------------------------


     

procedure report_3_1_adl (var supervisor_id     :       number;
                          var tecnico_id        :       number;
                          var servicios_total   :       number;
                          var servicios_pan      :       number;
                          var servicios_ae      :       number;
                          var volumen_total     :       number;);

{LOCAL VARIABLES}

var supervisor_servicios_table  
        : number(9,0) import report_3_1_1_adl.supervisor_servicios_table;
        status                  :       number(9,0);

    nullchk     :       number;

{VARIABLES INIT}

servicios_total := 0;
servicios_pan   := 0;
servicios_ae    := 0;
volumen_total   := 0;

{MAIN BEGIN LOGIC}

begin
SET_TRACE();

{LETS CLEAR OUR MIND FIRST}
make_null(nullchk);

db_reset(supervisor_servicios_table,status);

{SET DSD VALUES TO LOOK FOR}

REPORT_3_1_ADL_DSD.ID_SUPERVISOR := supervisor_id;
REPORT_3_1_ADL_DSD.ID_TECNICO    := tecnico_id;

{LETS SEE IF THIS PEOPLE IS WORKING ON SOMETHING}

db_query(supervisor_servicios_table,status);

db_get_first(supervisor_servicios_table,status);

while (status <> db_eos) do
begin
      if ( status = 0 ) then 
       begin
       {SERVICES COUNTING ROUTINE}
 if REPORT_3_1_ADL_DSD.COD_SERVICIO = 'PAN' then
 begin
         servicios_pan := servicios_pan + 1;
 end; 
 if substr(REPORT_3_1_ADL_DSD.COD_SERVICIO,0,2) = 'AE' then
 begin
         servicios_ae := servicios_ae + 1;
 end;
 servicios_total := servicios_total + 1;
 if (REPORT_3_1_ADL_DSD.WEIGHT_SERVICE <> nullchk) then
        volumen_total := volumen_total + REPORT_3_1_ADL_DSD.WEIGHT_SERVICE;
        db_get_next(supervisor_servicios_table,status);
       end;
       {end-begin-status=0)}
end;
{end-while-loop}
SET_NOTRACE();
end;
{END-MAIN-BEGIN}

    



--------------------------------------------------------------------- */
