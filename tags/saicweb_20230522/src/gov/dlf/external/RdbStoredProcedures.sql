DROP PROCEDURE DELETE_FIX_FILES;
DROP PROCEDURE GET_USERNAME;
DROP PROCEDURE RUN_MAIL;
DROP PROCEDURE RUN_NOTIFICACIONES;
DROP PROCEDURE SACP510SP_EPL;
DROP PROCEDURE SACP540SP_EPL;
DROP PROCEDURE SET_PRINTER_FILE_EPL;

DROP MODULE RALLY_EXTERNAL_LINK_CALLS;



-- ----------------------------------------------------------------------
-- ----------   Definitions for "external link" procedures   ------------


CREATE PROCEDURE DELETE_FIX_FILES
(
  IN    :PARAMETER1 VARCHAR ( 32 ) BY DESCRIPTOR
);
EXTERNAL NAME LIB$DELETE_FILE
LOCATION 'LIBRTL' 
LANGUAGE GENERAL 
GENERAL PARAMETER STYLE 
BIND ON SERVER SITE 
BIND SCOPE TRANSACTION 
;


CREATE PROCEDURE GET_USERNAME
(
  IN    :PARAMETER1 VARCHAR ( 8 ) BY DESCRIPTOR,
  OUT   :PARAMETER2 VARCHAR ( 16 ) BY DESCRIPTOR,
  IN    :PARAMETER3 INTEGER BY VALUE,
  IN    :PARAMETER4 INTEGER BY VALUE,
  IN    :PARAMETER5 INTEGER BY VALUE
);
EXTERNAL NAME LIB$GET_SYMBOL
LOCATION 'LIBRTL' 
LANGUAGE GENERAL 
GENERAL PARAMETER STYLE 
BIND ON SERVER SITE 
BIND SCOPE TRANSACTION 
;


CREATE PROCEDURE RUN_MAIL
(
  IN    :PARAMETER1 VARCHAR ( 80 ) BY DESCRIPTOR,
  IN    :PARAMETER2 INTEGER BY VALUE
);
EXTERNAL NAME LIB$SPAWN
LOCATION 'LIBRTL' 
LANGUAGE GENERAL 
GENERAL PARAMETER STYLE 
BIND ON SERVER SITE 
BIND SCOPE TRANSACTION 
;


CREATE PROCEDURE RUN_NOTIFICACIONES
(
  IN    :PARAMETER1 VARCHAR ( 80 ) BY DESCRIPTOR,
  IN    :PARAMETER2 INTEGER BY VALUE,
  IN    :PARAMETER3 VARCHAR ( 9 ) BY DESCRIPTOR,
  IN    :PARAMETER4 INTEGER BY REFERENCE,
  IN    :PARAMETER5 INTEGER BY VALUE
);
EXTERNAL NAME LIB$SPAWN
LOCATION 'LIBRTL' 
LANGUAGE GENERAL 
GENERAL PARAMETER STYLE 
BIND ON SERVER SITE 
BIND SCOPE TRANSACTION 
;


CREATE PROCEDURE SACP510SP_EPL
(
  IN    :PARAMETER1 INTEGER BY REFERENCE,
  INOUT :PARAMETER2 INTEGER BY REFERENCE,
  INOUT :PARAMETER3 VARCHAR ( 5 ) BY REFERENCE,
  INOUT :PARAMETER4 DATE VMS BY REFERENCE,
  INOUT :PARAMETER5 VARCHAR ( 4 ) BY REFERENCE,
  INOUT :PARAMETER6 INTEGER BY REFERENCE,
  INOUT :PARAMETER7 DATE VMS BY REFERENCE
);
EXTERNAL NAME SACP510SP
LOCATION 'SACP510SP_LIB' 
LANGUAGE GENERAL 
GENERAL PARAMETER STYLE 
BIND ON SERVER SITE 
BIND SCOPE TRANSACTION 
;


CREATE PROCEDURE SACP540SP_EPL
(
  IN    :PARAMETER1 INTEGER BY REFERENCE,
  IN    :PARAMETER2 INTEGER BY REFERENCE,
  INOUT :PARAMETER3 INTEGER BY REFERENCE,
  INOUT :PARAMETER4 VARCHAR ( 5 ) BY REFERENCE,
  INOUT :PARAMETER5 INTEGER BY REFERENCE,
  INOUT :PARAMETER6 INTEGER BY REFERENCE
);
EXTERNAL NAME SACP540SP
LOCATION 'SACP540SP_LIB' 
LANGUAGE GENERAL 
GENERAL PARAMETER STYLE 
BIND ON SERVER SITE 
BIND SCOPE TRANSACTION 
;


CREATE PROCEDURE SET_PRINTER_FILE_EPL
(
  IN    :PARAMETER1 VARCHAR ( 80 ) BY DESCRIPTOR,
  IN    :PARAMETER2 INTEGER BY VALUE,
  IN    :PARAMETER3 INTEGER BY VALUE,
  IN    :PARAMETER4 INTEGER BY VALUE,
  IN    :PARAMETER5 INTEGER BY VALUE,
  IN    :PARAMETER6 INTEGER BY VALUE,
  IN    :PARAMETER7 INTEGER BY VALUE,
  IN    :PARAMETER8 INTEGER BY VALUE,
  IN    :PARAMETER9 INTEGER BY VALUE,
  IN    :PARAMETER10 INTEGER BY VALUE,
  IN    :PARAMETER11 INTEGER BY VALUE,
  IN    :PARAMETER12 INTEGER BY VALUE,
  IN    :PARAMETER13 INTEGER BY VALUE
);
EXTERNAL NAME LIB$SPAWN
LOCATION 'LIBRTL' 
LANGUAGE GENERAL 
GENERAL PARAMETER STYLE 
BIND ON SERVER SITE 
BIND SCOPE TRANSACTION 
;




-- ----------------------------------------------------------------------
-- ----------   Definitions for "external link" procedure calls   -------

CREATE MODULE RALLY_EXTERNAL_LINK_CALLS
LANGUAGE SQL 
--AUTHORIZATION __USER_NAME



PROCEDURE CALL_DELETE_FIX_FILES
(
  IN    :PARAMETER1 VARCHAR ( 32 ),

); 
BEGIN
  DECLARE :$PARAMETER1 VARCHAR ( 32 );

  SET :$PARAMETER1 = :PARAMETER1;


--  CALL DELETE_FIX_FILES ( :$PARAMETER1 );


END;


PROCEDURE CALL_GET_USERNAME
(
  IN    :PARAMETER1 VARCHAR ( 8 ),
  IN    :PARAMETER3 INTEGER,
  IN    :PARAMETER4 INTEGER,
  IN    :PARAMETER5 INTEGER,

  OUT   :PARAMETER2 VARCHAR ( 16 )
); 
BEGIN
  DECLARE :$PARAMETER1 VARCHAR ( 8 );
  DECLARE :$PARAMETER2 VARCHAR ( 16 );
  DECLARE :$PARAMETER3 INTEGER;
  DECLARE :$PARAMETER4 INTEGER;
  DECLARE :$PARAMETER5 INTEGER;

  SET :$PARAMETER1 = :PARAMETER1;
  SET :$PARAMETER3 = :PARAMETER3;
  SET :$PARAMETER4 = :PARAMETER4;
  SET :$PARAMETER5 = :PARAMETER5;


--  CALL GET_USERNAME ( :$PARAMETER1, :$PARAMETER2, :$PARAMETER3, :$PARAMETER4, :$PARAMETER5 );


  SET :PARAMETER2 = :$PARAMETER2;
END;


PROCEDURE CALL_RUN_MAIL
(
  IN    :PARAMETER1 VARCHAR ( 80 ),
  IN    :PARAMETER2 INTEGER,

); 
BEGIN
  DECLARE :$PARAMETER1 VARCHAR ( 80 );
  DECLARE :$PARAMETER2 INTEGER;

  SET :$PARAMETER1 = :PARAMETER1;
  SET :$PARAMETER2 = :PARAMETER2;


--  CALL RUN_MAIL ( :$PARAMETER1, :$PARAMETER2 );


END;


PROCEDURE CALL_RUN_NOTIFICACIONES
(
  IN    :PARAMETER1 VARCHAR ( 80 ),
  IN    :PARAMETER2 INTEGER,
  IN    :PARAMETER3 VARCHAR ( 9 ),
  IN    :PARAMETER4 INTEGER,
  IN    :PARAMETER5 INTEGER,

); 
BEGIN
  DECLARE :$PARAMETER1 VARCHAR ( 80 );
  DECLARE :$PARAMETER2 INTEGER;
  DECLARE :$PARAMETER3 VARCHAR ( 9 );
  DECLARE :$PARAMETER4 INTEGER;
  DECLARE :$PARAMETER5 INTEGER;

  SET :$PARAMETER1 = :PARAMETER1;
  SET :$PARAMETER2 = :PARAMETER2;
  SET :$PARAMETER3 = :PARAMETER3;
  SET :$PARAMETER4 = :PARAMETER4;
  SET :$PARAMETER5 = :PARAMETER5;


--  CALL RUN_NOTIFICACIONES ( :$PARAMETER1, :$PARAMETER2, :$PARAMETER3, :$PARAMETER4, :$PARAMETER5 );


END;


PROCEDURE CALL_SACP510SP_EPL
(
  IN    :PARAMETER1 INTEGER,
  INOUT :PARAMETER2 INTEGER,
  INOUT :PARAMETER3 VARCHAR ( 5 ),
  INOUT :PARAMETER4 DATE VMS,
  INOUT :PARAMETER5 VARCHAR ( 4 ),
  INOUT :PARAMETER6 INTEGER,
  INOUT :PARAMETER7 DATE VMS
); 
BEGIN
  DECLARE :$PARAMETER1 INTEGER;
  DECLARE :$PARAMETER2 INTEGER;
  DECLARE :$PARAMETER3 VARCHAR ( 5 );
  DECLARE :$PARAMETER4 DATE VMS;
  DECLARE :$PARAMETER5 VARCHAR ( 4 );
  DECLARE :$PARAMETER6 INTEGER;
  DECLARE :$PARAMETER7 DATE VMS;

  SET :$PARAMETER1 = :PARAMETER1;

  SET :$PARAMETER2 = :PARAMETER2;
  SET :$PARAMETER3 = :PARAMETER3;
  SET :$PARAMETER4 = :PARAMETER4;
  SET :$PARAMETER5 = :PARAMETER5;
  SET :$PARAMETER6 = :PARAMETER6;
  SET :$PARAMETER7 = :PARAMETER7;

--  CALL SACP510SP_EPL ( :$PARAMETER1, :$PARAMETER2, :$PARAMETER3, :$PARAMETER4, :$PARAMETER5, :$PARAMETER6, :$PARAMETER7 );

  SET :PARAMETER2 = :$PARAMETER2;
  SET :PARAMETER3 = :$PARAMETER3;
  SET :PARAMETER4 = :$PARAMETER4;
  SET :PARAMETER5 = :$PARAMETER5;
  SET :PARAMETER6 = :$PARAMETER6;
  SET :PARAMETER7 = :$PARAMETER7;

END;


PROCEDURE CALL_SACP540SP_EPL
(
  IN    :PARAMETER1 INTEGER,
  IN    :PARAMETER2 INTEGER,
  INOUT :PARAMETER3 INTEGER,
  INOUT :PARAMETER4 VARCHAR ( 5 ),
  INOUT :PARAMETER5 INTEGER,
  INOUT :PARAMETER6 INTEGER
); 
BEGIN
  DECLARE :$PARAMETER1 INTEGER;
  DECLARE :$PARAMETER2 INTEGER;
  DECLARE :$PARAMETER3 INTEGER;
  DECLARE :$PARAMETER4 VARCHAR ( 5 );
  DECLARE :$PARAMETER5 INTEGER;
  DECLARE :$PARAMETER6 INTEGER;

  SET :$PARAMETER1 = :PARAMETER1;
  SET :$PARAMETER2 = :PARAMETER2;

  SET :$PARAMETER3 = :PARAMETER3;
  SET :$PARAMETER4 = :PARAMETER4;
  SET :$PARAMETER5 = :PARAMETER5;
  SET :$PARAMETER6 = :PARAMETER6;

--  CALL SACP540SP_EPL ( :$PARAMETER1, :$PARAMETER2, :$PARAMETER3, :$PARAMETER4, :$PARAMETER5, :$PARAMETER6 );

  SET :PARAMETER3 = :$PARAMETER3;
  SET :PARAMETER4 = :$PARAMETER4;
  SET :PARAMETER5 = :$PARAMETER5;
  SET :PARAMETER6 = :$PARAMETER6;

END;


PROCEDURE CALL_SET_PRINTER_FILE_EPL
(
  IN    :PARAMETER1 VARCHAR ( 80 ),
  IN    :PARAMETER2 INTEGER,
  IN    :PARAMETER3 INTEGER,
  IN    :PARAMETER4 INTEGER,
  IN    :PARAMETER5 INTEGER,
  IN    :PARAMETER6 INTEGER,
  IN    :PARAMETER7 INTEGER,
  IN    :PARAMETER8 INTEGER,
  IN    :PARAMETER9 INTEGER,
  IN    :PARAMETER10 INTEGER,
  IN    :PARAMETER11 INTEGER,
  IN    :PARAMETER12 INTEGER,
  IN    :PARAMETER13 INTEGER,

); 
BEGIN
  DECLARE :$PARAMETER1 VARCHAR ( 80 );
  DECLARE :$PARAMETER2 INTEGER;
  DECLARE :$PARAMETER3 INTEGER;
  DECLARE :$PARAMETER4 INTEGER;
  DECLARE :$PARAMETER5 INTEGER;
  DECLARE :$PARAMETER6 INTEGER;
  DECLARE :$PARAMETER7 INTEGER;
  DECLARE :$PARAMETER8 INTEGER;
  DECLARE :$PARAMETER9 INTEGER;
  DECLARE :$PARAMETER10 INTEGER;
  DECLARE :$PARAMETER11 INTEGER;
  DECLARE :$PARAMETER12 INTEGER;
  DECLARE :$PARAMETER13 INTEGER;

  SET :$PARAMETER1 = :PARAMETER1;
  SET :$PARAMETER2 = :PARAMETER2;
  SET :$PARAMETER3 = :PARAMETER3;
  SET :$PARAMETER4 = :PARAMETER4;
  SET :$PARAMETER5 = :PARAMETER5;
  SET :$PARAMETER6 = :PARAMETER6;
  SET :$PARAMETER7 = :PARAMETER7;
  SET :$PARAMETER8 = :PARAMETER8;
  SET :$PARAMETER9 = :PARAMETER9;
  SET :$PARAMETER10 = :PARAMETER10;
  SET :$PARAMETER11 = :PARAMETER11;
  SET :$PARAMETER12 = :PARAMETER12;
  SET :$PARAMETER13 = :PARAMETER13;


--  CALL SET_PRINTER_FILE_EPL ( :$PARAMETER1, :$PARAMETER2, :$PARAMETER3, :$PARAMETER4, :$PARAMETER5, :$PARAMETER6, :$PARAMETER7, :$PARAMETER8, :$PARAMETER9, :$PARAMETER10, :$PARAMETER11, :$PARAMETER12, :$PARAMETER13 );


END;


END MODULE;

COMMIT WORK;
