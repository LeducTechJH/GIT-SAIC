package gov.dlf.logic;


import gov.dlf.external.*;
import gov.dlf.facade.*;
import gov.dlf.presentation.*;


import java.util.*;

import net.maintrend.appmanager.*;
import net.maintrend.datamanager.*;
import net.maintrend.interfaces.*;
import net.maintrend.interlink.*;
import net.maintrend.mdi.*;
import net.maintrend.rallyengine.*;
import net.maintrend.util.*;
import net.maintrend.util.format.*;



/**
 * __Comment
 *
 * Generated by Rally-to-Java Convertor. MainTrend Ltd.
 */
public class SC724_PERSONA_ADL
     extends ADL
{
  // -------------------------------------------------------------------
  // ----------   Class Attributes   -----------------------------------

  /**  */
  public static boolean staticCall = false;



  // -------------------------------------------------------------------
  // ----------   Instance Attributes   --------------------------------

  /**  */
  public SAIC_DMQ_ORA_Application app;
  /**  */
  public RallyDataManager dm = null;



  // -------------------------------------------------------------------
  // ----------   Instance Condition Attributes   ----------------------
 
  public boolean _condition0 = false;
 
  public boolean _condition1 = false;
 
  public boolean _condition2 = false;
 
  public boolean _condition3 = false;
 
  public boolean _condition4 = false;
 
  public boolean _condition5 = false;
 
  public boolean _condition6 = false;

 

  // -------------------------------------------------------------------
  // ----------   Instance Export Attributes   -------------------------

  public double OPEN_ID = 0;

  public double STATUS_CODE = 0;

  public double OPEN_ID2 = 0;

  public double STATUS_ID2 = 0;

  public double OPEN_ID3 = 0;

  public double STATUS_ID3 = 0;

  public double TYPED_KEY = 0;

  public double COUNTER = 0;



  public DataStore SC724_READ_DSD = null;

  public DataStore FACTURAS_DSD = null;

  public DataStore RECLA_RETRO_TABLE_DSD = null;



  // -------------------------------------------------------------------
  // ----------   Instance Attributes' Access Methods   ----------------

  
  /**  */
  public static void setOPEN_ID  ( RallyApplication __app, Parameter value )
  {
    ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).OPEN_ID = value.getDouble ( );
  }  

  
  /**  */
  public static void setSTATUS_CODE  ( RallyApplication __app, Parameter value )
  {
    ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).STATUS_CODE = value.getDouble ( );
  }  

  
  /**  */
  public static void setOPEN_ID2  ( RallyApplication __app, Parameter value )
  {
    ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).OPEN_ID2 = value.getDouble ( );
  }  

  
  /**  */
  public static void setSTATUS_ID2  ( RallyApplication __app, Parameter value )
  {
    ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).STATUS_ID2 = value.getDouble ( );
  }  

  
  /**  */
  public static void setOPEN_ID3  ( RallyApplication __app, Parameter value )
  {
    ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).OPEN_ID3 = value.getDouble ( );
  }  

  
  /**  */
  public static void setSTATUS_ID3  ( RallyApplication __app, Parameter value )
  {
    ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).STATUS_ID3 = value.getDouble ( );
  }  

  
  /**  */
  public static void setTYPED_KEY  ( RallyApplication __app, Parameter value )
  {
    ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).TYPED_KEY = value.getDouble ( );
  }  

  
  /**  */
  public static void setCOUNTER  ( RallyApplication __app, Parameter value )
  {
    ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).COUNTER = value.getDouble ( );
  }  
    


  /**  */
  public static DataStore getSC724_READ_DSD  ( RallyApplication __app )
  {
    return ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).SC724_READ_DSD;
  }


  /**  */
  public static void setSC724_READ_DSD  ( RallyApplication __app, DataStore value )
  {
    ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).SC724_READ_DSD = value;
  }


  /**  */
  public static void setSC724_READ_DSD  ( RallyApplication __app, Object value )
  {
    ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).SC724_READ_DSD = ( DataStore ) value;
  }



  /**  */
  public static DataStore getFACTURAS_DSD  ( RallyApplication __app )
  {
    return ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).FACTURAS_DSD;
  }


  /**  */
  public static void setFACTURAS_DSD  ( RallyApplication __app, DataStore value )
  {
    ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).FACTURAS_DSD = value;
  }


  /**  */
  public static void setFACTURAS_DSD  ( RallyApplication __app, Object value )
  {
    ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).FACTURAS_DSD = ( DataStore ) value;
  }



  /**  */
  public static DataStore getRECLA_RETRO_TABLE_DSD  ( RallyApplication __app )
  {
    return ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).RECLA_RETRO_TABLE_DSD;
  }


  /**  */
  public static void setRECLA_RETRO_TABLE_DSD  ( RallyApplication __app, DataStore value )
  {
    ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).RECLA_RETRO_TABLE_DSD = value;
  }


  /**  */
  public static void setRECLA_RETRO_TABLE_DSD  ( RallyApplication __app, Object value )
  {
    ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).RECLA_RETRO_TABLE_DSD = ( DataStore ) value;
  }




  /**  */
  public static double getOPEN_ID  ( RallyApplication __app )
  {
    return ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).OPEN_ID;
  }


  /**  */
  public static Double getOPEN_IDDouble ( RallyApplication __app )
  {
    return new Double ( ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).OPEN_ID );
  }


  /**  */
  public static void setOPEN_ID  ( RallyApplication __app, double value )
  {
    ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).OPEN_ID = value;
  }


  /**  */
  public static void setOPEN_ID  ( RallyApplication __app, Object value )
  {
    ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).OPEN_ID = ( ( Double ) value ).doubleValue ( );
  }


  /**  */
  public static double getSTATUS_CODE  ( RallyApplication __app )
  {
    return ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).STATUS_CODE;
  }


  /**  */
  public static Double getSTATUS_CODEDouble ( RallyApplication __app )
  {
    return new Double ( ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).STATUS_CODE );
  }


  /**  */
  public static void setSTATUS_CODE  ( RallyApplication __app, double value )
  {
    ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).STATUS_CODE = value;
  }


  /**  */
  public static void setSTATUS_CODE  ( RallyApplication __app, Object value )
  {
    ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).STATUS_CODE = ( ( Double ) value ).doubleValue ( );
  }


  /**  */
  public static double getOPEN_ID2  ( RallyApplication __app )
  {
    return ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).OPEN_ID2;
  }


  /**  */
  public static Double getOPEN_ID2Double ( RallyApplication __app )
  {
    return new Double ( ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).OPEN_ID2 );
  }


  /**  */
  public static void setOPEN_ID2  ( RallyApplication __app, double value )
  {
    ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).OPEN_ID2 = value;
  }


  /**  */
  public static void setOPEN_ID2  ( RallyApplication __app, Object value )
  {
    ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).OPEN_ID2 = ( ( Double ) value ).doubleValue ( );
  }


  /**  */
  public static double getSTATUS_ID2  ( RallyApplication __app )
  {
    return ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).STATUS_ID2;
  }


  /**  */
  public static Double getSTATUS_ID2Double ( RallyApplication __app )
  {
    return new Double ( ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).STATUS_ID2 );
  }


  /**  */
  public static void setSTATUS_ID2  ( RallyApplication __app, double value )
  {
    ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).STATUS_ID2 = value;
  }


  /**  */
  public static void setSTATUS_ID2  ( RallyApplication __app, Object value )
  {
    ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).STATUS_ID2 = ( ( Double ) value ).doubleValue ( );
  }


  /**  */
  public static double getOPEN_ID3  ( RallyApplication __app )
  {
    return ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).OPEN_ID3;
  }


  /**  */
  public static Double getOPEN_ID3Double ( RallyApplication __app )
  {
    return new Double ( ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).OPEN_ID3 );
  }


  /**  */
  public static void setOPEN_ID3  ( RallyApplication __app, double value )
  {
    ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).OPEN_ID3 = value;
  }


  /**  */
  public static void setOPEN_ID3  ( RallyApplication __app, Object value )
  {
    ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).OPEN_ID3 = ( ( Double ) value ).doubleValue ( );
  }


  /**  */
  public static double getSTATUS_ID3  ( RallyApplication __app )
  {
    return ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).STATUS_ID3;
  }


  /**  */
  public static Double getSTATUS_ID3Double ( RallyApplication __app )
  {
    return new Double ( ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).STATUS_ID3 );
  }


  /**  */
  public static void setSTATUS_ID3  ( RallyApplication __app, double value )
  {
    ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).STATUS_ID3 = value;
  }


  /**  */
  public static void setSTATUS_ID3  ( RallyApplication __app, Object value )
  {
    ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).STATUS_ID3 = ( ( Double ) value ).doubleValue ( );
  }


  /**  */
  public static double getTYPED_KEY  ( RallyApplication __app )
  {
    return ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).TYPED_KEY;
  }


  /**  */
  public static Double getTYPED_KEYDouble ( RallyApplication __app )
  {
    return new Double ( ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).TYPED_KEY );
  }


  /**  */
  public static void setTYPED_KEY  ( RallyApplication __app, double value )
  {
    ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).TYPED_KEY = value;
  }


  /**  */
  public static void setTYPED_KEY  ( RallyApplication __app, Object value )
  {
    ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).TYPED_KEY = ( ( Double ) value ).doubleValue ( );
  }


  /**  */
  public static double getCOUNTER  ( RallyApplication __app )
  {
    return ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).COUNTER;
  }


  /**  */
  public static Double getCOUNTERDouble ( RallyApplication __app )
  {
    return new Double ( ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).COUNTER );
  }


  /**  */
  public static void setCOUNTER  ( RallyApplication __app, double value )
  {
    ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).COUNTER = value;
  }


  /**  */
  public static void setCOUNTER  ( RallyApplication __app, Object value )
  {
    ( ( SC724_PERSONA_ADL ) __app.getADL ( SC724_PERSONA_ADL.class ) ).COUNTER = ( ( Double ) value ).doubleValue ( );
  }



  // -------------------------------------------------------------------
  // ----------   Methods   --------------------------------------------

  /**
   * 
   * @param __app
   * @return
   */
  public static SC724_PERSONA_ADL get ( RallyApplication __app )
  {
    SC724_PERSONA_ADL adl = new SC724_PERSONA_ADL ( );
    __app.register ( adl, "SC724_PERSONA_ADL" );
    __app.setADL ( SC724_PERSONA_ADL.class, adl ); 
    adl.setApplication ( __app );
    return adl;
  }


  /**
   *
   * @param __app
   * @param ps
   *
   * @return
   */
  public static void exec ( RallyApplication __app, ParameterSet ps )
  {
    SC724_PERSONA_ADL.get ( __app ).process ( ps );
  }


  /**
   *
   * @param __app
   *
   * @return
   */
  public static void exec ( RallyApplication __app )
  {
    ParameterSet ps = null;
    SC724_PERSONA_ADL.exec ( __app, ps );
  }


  /**
   * Overrides the ancestor's method
   * 
   * @param __app
   */
  public void setApplication ( RallyApplication __app )
  {
    this.app = ( SAIC_DMQ_ORA_Application ) __app;
    if ( this.app != null )
    {
      this.dm = ( RallyDataManager ) this.app.getDataManager ( );
    }
  }


  /**
   * Overrides the ancestor's method
   * 
   * @param parms
   */
  public void execute ( ParameterSet parms )
  {
    this.process ( parms );
  }




  /**
   *
   */
  protected void doReturn ( )
  {
    this.unregister ( );
  }


  /**
   *
   */
  public void unregister ( )
  {
    this.app.unregister ( this );
    IRegisteredObject rObj = this.app.get ( "SC724_PERSONA_ADL" );
    if ( rObj != null && rObj instanceof SC724_PERSONA_ADL )
    {
      this.app.setADL ( SC724_PERSONA_ADL.class, ( SC724_PERSONA_ADL ) rObj );
    }
  }


  /**
   * Overrides the ancestor's method
   * 
   * @param ps
   */
  protected void process ( ParameterSet ps )
  {
    Debug.println ( Debug.TRACE, "SC724_PERSONA_ADL Step " + this.currentStep );
    super.process ( ps );
    switch ( this.currentStep ) 
    {
      case 0:  { this.currentStep ++; this.step0 ( this.keyParms ); break; }
      case 1:  { this.currentStep ++; this.step1 ( this.keyParms ); break; }
      case 2:  { this.currentStep ++; this.step2 ( this.keyParms ); break; }
      case 3:  { this.currentStep ++; this.step3 ( this.keyParms ); break; }
      case 4:  { this.currentStep ++; this.step4 ( this.keyParms ); break; }
      case 5:  { this.currentStep ++; this.step5 ( this.keyParms ); break; }
      case 6:  { this.currentStep ++; this.step6 ( this.keyParms ); break; }
      default: 
      { 
        this.currentStep = 0;
        Debug.println ( Debug.TRACE, "SC724_PERSONA_ADL ended" );
        this.unregister ( );
        break;
      }
    }
    if ( this.currentStep > 0 ) this.app.goOn ( );
  }



  /**
   *
   */
  protected void step0 ( ParameterSet ps )
  {

    TYPED_KEY = RallyAppCommandFactory.translate ( this.app.getLastCommandName ( ) );
    if ( Compare.equals ( TYPED_KEY, RallyAppCommandFactory.ABORTACTION ) ) 
    {
      this.doReturn ( );
      return;
    }
    this.app.NUM_FACTURA_GBL = 0;
    this.app.SS_JEFE_FAMILIA_GBL = this.app.form ( "GET_SC724_FR" ).getDoubleItem ( "SSNO_JEFE" );
    this.app.SS_JEFE_SERVICIO_GBL = this.app.form ( "GET_SC724_FR" ).getDoubleItem ( "SSNO_ENCARGADO" );
    this.app.COD_SERVICIO_GBL = this.app.form ( "GET_SC724_FR" ).getStringItem ( "SERVICIO" );
    this.app.ACCION_GBL = this.app.form ( "GET_SC724_FR" ).getStringItem ( "ACCION" );
    this.app.FCH_FINAL_GBL = this.app.form ( "GET_SC724_FR" ).getDateItem ( "FECHA_ID" );
    this.app.FCH_FACTURA_GBL = RallySpanishDatesParser.parseDateString ( "" );
    this.app.FCH_FACTURA_GBL = this.app.SYSTEM_DATE;
    SC724_READ_DSD = this.dm.create ( "SC724_READ_DSD" );
    OPEN_ID = SC724_READ_DSD.getId ( );
    STATUS_CODE = RallyDataStoreException.getDefault ( );

    STATUS_CODE  = this.dm.reset ( OPEN_ID );

    this.dm.setField ( this.dm.get ( "SC724_READ_DSD" ), "RECLA_RETRO_TBL_SEGURO_SOCIAL_JEFE_FAM", this.app.form ( "GET_SC724_FR" ).getDoubleItem ( "SSNO_JEFE" ));
    this.dm.setField ( this.dm.get ( "SC724_READ_DSD" ), "RECLA_RETRO_TBL_SEGURO_SOCIAL_JEFE_SERV", this.app.form ( "GET_SC724_FR" ).getDoubleItem ( "SSNO_ENCARGADO" ));
    this.dm.setField ( this.dm.get ( "SC724_READ_DSD" ), "COD_SERVICIO", this.app.form ( "GET_SC724_FR" ).getStringItem ( "SERVICIO" ));
    this.dm.setField ( this.dm.get ( "SC724_READ_DSD" ), "RECLA_RETRO_TBL_ACCION", this.app.form ( "GET_SC724_FR" ).getStringItem ( "ACCION" ));
    this.dm.setField ( this.dm.get ( "SC724_READ_DSD" ), "RECLA_RETRO_TBL_FECHA_IDENTIFICADO", this.app.form ( "GET_SC724_FR" ).getDateItem ( "FECHA_ID" ));
 
    STATUS_CODE  = this.dm.limitQueryFromBuffer ( OPEN_ID );
    STATUS_CODE  = this.dm.retrieve ( OPEN_ID );

    STATUS_CODE  = this.dm.firstRow ( OPEN_ID );

    if ( ( Compare.equals ( STATUS_CODE, 0 ) ) && ( Compare.equals ( this.dm.getFieldString ( this.dm.get ( "SC724_READ_DSD" ), "STATUS" ), "NOGESCOB" ) )  ) 
    {
      this._condition0 = true;
    }
    else
    {
      this._condition0 = false;
    }
    if ( this._condition0 )
    {
      STATUS_CODE  = this.dm.dbClose ( OPEN_ID );

      this.app.RR_ACCION_GBL = this.app.ACCION_GBL;
      this.app.RR_FCH_IDN = this.app.FCH_FINAL_GBL;
      this.app.FECHA_PLUS_15_GBL = MathService.plus ( this.app.SYSTEM_DATE, 15  );
      this.app.printChain ( "DSS109_REC_PKT", 1 );
      return;
    }

  }


  /**
   *
   */
  protected void step1 ( ParameterSet ps )
  {
    if ( this._condition0 )    //    if ( ( Compare.equals ( STATUS_CODE, 0 ) ) && ( Compare.equals ( this.dm.getFieldString ( this.dm.get ( "SC724_READ_DSD" ), "STATUS" ), "NOGESCOB" ) )  ) 
    {
      this.app.returnTo ( "RECLA_NOTI_MENU" ); if ( true ) return;
    }
    if ( ( Compare.equals ( STATUS_CODE, 0 ) ) && ( ( Compare.equals ( this.dm.getFieldString ( this.dm.get ( "SC724_READ_DSD" ), "STATUS_AUTORIZACION" ), "PAUT" ) ) || ( Compare.equals ( this.dm.getFieldString ( this.dm.get ( "SC724_READ_DSD" ), "STATUS_AUTORIZACION" ), "REEV" ) ) )  ) 
    {
      this._condition1 = true;
    }
    else
    {
      this._condition1 = false;
    }
    if ( this._condition1 )
    {
      STATUS_CODE  = this.dm.dbClose ( OPEN_ID );

      this.app.RR_ACCION_GBL = this.app.ACCION_GBL;
      this.app.RR_FCH_IDN = this.app.FCH_FINAL_GBL;
      this.app.FECHA_PLUS_15_GBL = MathService.plus ( this.app.SYSTEM_DATE, 15  );
      this.app.printChain ( "SC724_PKT;DSS109_REC_PKT" );
      this.app.printChain ( "ADSEF_DIP_2_PKT" );
      return;
    }

  }

  
  /**
   *
   */
  protected void step2 ( ParameterSet ps )
  {
    if ( this._condition1 )    //    if ( ( Compare.equals ( STATUS_CODE, 0 ) ) && ( ( Compare.equals ( this.dm.getFieldString ( this.dm.get ( "SC724_READ_DSD" ), "STATUS_AUTORIZACION" ), "PAUT" ) ) || ( Compare.equals ( this.dm.getFieldString ( this.dm.get ( "SC724_READ_DSD" ), "STATUS_AUTORIZACION" ), "REEV" ) ) )  ) 
    {
    }
    else
    {
      STATUS_CODE  = this.dm.dbClose ( OPEN_ID );

      SC724_READ_DSD = this.dm.create ( "SC724_READ_DSD" );
      OPEN_ID = SC724_READ_DSD.getId ( );
      STATUS_CODE = RallyDataStoreException.getDefault ( );

      STATUS_CODE  = this.dm.reset ( OPEN_ID );

      this.dm.setField ( this.dm.get ( "SC724_READ_DSD" ), "RECLA_RETRO_TBL_SEGURO_SOCIAL_JEFE_FAM", this.app.form ( "GET_SC724_FR" ).getDoubleItem ( "SSNO_JEFE" ));
      this.dm.setField ( this.dm.get ( "SC724_READ_DSD" ), "RECLA_RETRO_TBL_SEGURO_SOCIAL_JEFE_SERV", this.app.form ( "GET_SC724_FR" ).getDoubleItem ( "SSNO_ENCARGADO" ));
      this.dm.setField ( this.dm.get ( "SC724_READ_DSD" ), "COD_SERVICIO", this.app.form ( "GET_SC724_FR" ).getStringItem ( "SERVICIO" ));
      this.dm.setField ( this.dm.get ( "SC724_READ_DSD" ), "RECLA_RETRO_TBL_ACCION", this.app.form ( "GET_SC724_FR" ).getStringItem ( "ACCION" ));
      this.dm.setField ( this.dm.get ( "SC724_READ_DSD" ), "RECLA_RETRO_TBL_FECHA_IDENTIFICADO", this.app.form ( "GET_SC724_FR" ).getDateItem ( "FECHA_ID" ));
      this.dm.setField ( this.dm.get ( "SC724_READ_DSD" ), "STATUS_AUTORIZACION", "AUTO" );
 
      STATUS_CODE  = this.dm.limitQueryFromBuffer ( OPEN_ID );
      STATUS_CODE  = this.dm.retrieve ( OPEN_ID );

      STATUS_CODE  = this.dm.firstRow ( OPEN_ID );

      if ( Compare.equals ( STATUS_CODE, 0 ) ) 
      {
        this._condition2 = true;
      }
      else
      {
        this._condition2 = false;
      }
      if ( this._condition2 )
      {
        if ( Compare.gt ( this.dm.getFieldDouble ( this.dm.get ( "SC724_READ_DSD" ), "FACTURA" ), 0 ) ) 
        {
          this._condition3 = true;
        }
        else
        {
          this._condition3 = false;
        }
        if ( this._condition3 )
        {
          STATUS_CODE  = this.dm.dbClose ( OPEN_ID );

          FACTURAS_DSD = this.dm.create ( "FACTURAS_DSD" );
          OPEN_ID3 = FACTURAS_DSD.getId ( );
          STATUS_ID3 = RallyDataStoreException.getDefault ( );

          STATUS_ID3  = this.dm.reset ( OPEN_ID3 );

          this.dm.setField ( this.dm.get ( "FACTURAS_DSD" ), "SEGURO_SOCIAL_JEFE_FAM", this.app.form ( "GET_SC724_FR" ).getDoubleItem ( "SSNO_JEFE" ));
          this.dm.setField ( this.dm.get ( "FACTURAS_DSD" ), "SEGURO_SOCIAL_JEFE_SERV", this.app.form ( "GET_SC724_FR" ).getDoubleItem ( "SSNO_ENCARGADO" ));
          this.dm.setField ( this.dm.get ( "FACTURAS_DSD" ), "COD_SERVICIO", this.app.form ( "GET_SC724_FR" ).getStringItem ( "SERVICIO" ));
          this.dm.setField ( this.dm.get ( "FACTURAS_DSD" ), "FECHA_IDENTIFICADO", this.app.form ( "GET_SC724_FR" ).getDateItem ( "FECHA_ID" ));

          STATUS_ID3  = this.dm.limitQueryFromBuffer ( OPEN_ID3 );
          STATUS_ID3  = this.dm.retrieve ( OPEN_ID3 );

          STATUS_ID3  = this.dm.firstRow ( OPEN_ID3 );

          if ( Compare.equals ( STATUS_ID3, 0 ) ) 
          {
            this.app.FCH_FACTURA_GBL = this.dm.getFieldDate ( this.dm.get ( "FACTURAS_DSD" ), "FCH_FACTURA" );
          }
          STATUS_ID3  = this.dm.dbClose ( OPEN_ID3 );

          COUNTER = 0;
          
          this.app.RR_ACCION_GBL = this.app.ACCION_GBL;
          this.app.RR_FCH_IDN = this.app.FCH_FINAL_GBL;
          this.app.FECHA_PLUS_15_GBL = MathService.plus ( this.app.SYSTEM_DATE, 15  );
          this.app.printChain ( "SC724_PKT;DSS109_REC_PKT" );
          this.app.printChain ( "ADSEF_DIP_2_PKT" );
          return;
        }
      }
    }

  }

  
  /**
   *
   */
  protected void step3 ( ParameterSet ps )
  {
    if ( this._condition1 )    //    if ( ( Compare.equals ( STATUS_CODE, 0 ) ) && ( ( Compare.equals ( this.dm.getFieldString ( this.dm.get ( "SC724_READ_DSD" ), "STATUS_AUTORIZACION" ), "PAUT" ) ) || ( Compare.equals ( this.dm.getFieldString ( this.dm.get ( "SC724_READ_DSD" ), "STATUS_AUTORIZACION" ), "REEV" ) ) )  ) 
    {
    }
    else
    {
      if ( this._condition2 )    //      if ( Compare.equals ( STATUS_CODE, 0 ) ) 
      {
        if ( this._condition3 )    //        if ( Compare.gt ( this.dm.getFieldDouble ( this.dm.get ( "SC724_READ_DSD" ), "FACTURA" ), 0 ) ) 
        {
        }
        else
        {
          if ( Compare.equals ( this.dm.getFieldString ( this.dm.get ( "SC724_READ_DSD" ), "STATUS" ), "SALDRETR" ) ) 
          {
            this._condition4 = true;
          }
          else
          {
            this._condition4 = false;
          }
          if ( this._condition4 )
          {
            STATUS_CODE  = this.dm.dbClose ( OPEN_ID );

            this.app.FCH_FACTURA_GBL = this.app.SYSTEM_DATE;
            this.app.RR_ACCION_GBL = this.app.ACCION_GBL;
            this.app.RR_FCH_IDN = this.app.FCH_FINAL_GBL;
            this.app.FECHA_PLUS_15_GBL = MathService.plus ( this.app.SYSTEM_DATE, 15  );
            this.app.printChain ( "DSS109_REC_PKT;" );
     
            return;
          }
        }
      }
    }

  }


  /**
   *
   */
  protected void step4 ( ParameterSet ps )
  {
    if ( this._condition1 )    //    if ( ( Compare.equals ( STATUS_CODE, 0 ) ) && ( ( Compare.equals ( this.dm.getFieldString ( this.dm.get ( "SC724_READ_DSD" ), "STATUS_AUTORIZACION" ), "PAUT" ) ) || ( Compare.equals ( this.dm.getFieldString ( this.dm.get ( "SC724_READ_DSD" ), "STATUS_AUTORIZACION" ), "REEV" ) ) )  ) 
    {
    }
    else
    {
      if ( this._condition2 )    //      if ( Compare.equals ( STATUS_CODE, 0 ) ) 
      {
        if ( this._condition3 )    //        if ( Compare.gt ( this.dm.getFieldDouble ( this.dm.get ( "SC724_READ_DSD" ), "FACTURA" ), 0 ) ) 
        {
        }
        else
        {
          if ( this._condition4 )    //          if ( Compare.equals ( this.dm.getFieldString ( this.dm.get ( "SC724_READ_DSD" ), "STATUS" ), "SALDRETR" ) ) 
          {
          }
          else
          {
            STATUS_CODE  = this.dm.dbClose ( OPEN_ID );

            GET_SC724_FACTURA_PKT.exec ( this.app );
            return;
          }
        }
      }
    }

  }


  /**
   *
   */
  protected void step5 ( ParameterSet ps )
  {
    if ( this._condition1 )    //    if ( ( Compare.equals ( STATUS_CODE, 0 ) ) && ( ( Compare.equals ( this.dm.getFieldString ( this.dm.get ( "SC724_READ_DSD" ), "STATUS_AUTORIZACION" ), "PAUT" ) ) || ( Compare.equals ( this.dm.getFieldString ( this.dm.get ( "SC724_READ_DSD" ), "STATUS_AUTORIZACION" ), "REEV" ) ) )  ) 
    {
    }
    else
    {
      if ( this._condition2 )    //      if ( Compare.equals ( STATUS_CODE, 0 ) ) 
      {
        if ( this._condition3 )    //        if ( Compare.gt ( this.dm.getFieldDouble ( this.dm.get ( "SC724_READ_DSD" ), "FACTURA" ), 0 ) ) 
        {
        }
        else
        {
          if ( this._condition4 )    //          if ( Compare.equals ( this.dm.getFieldString ( this.dm.get ( "SC724_READ_DSD" ), "STATUS" ), "SALDRETR" ) ) 
          {
          }
          else
          {
          }
        }
      }
      else
      {
        this.app.setError ( 0, 1071 );
        this.doReturn ( );
        return; 
      }
    }
    RECLA_RETRO_TABLE_DSD = this.dm.create ( "RECLA_RETRO_TABLE_DSD" );
    OPEN_ID = RECLA_RETRO_TABLE_DSD.getId ( );
    STATUS_CODE = RallyDataStoreException.getDefault ( );

    STATUS_CODE  = this.dm.reset ( OPEN_ID );

    this.dm.setField ( this.dm.get ( "RECLA_RETRO_TABLE_DSD" ), "SEGURO_SOCIAL_JEFE_FAM", this.app.form ( "GET_SC724_FR" ).getDoubleItem ( "SSNO_JEFE" ));
    this.dm.setField ( this.dm.get ( "RECLA_RETRO_TABLE_DSD" ), "SEGURO_SOCIAL_JEFE_SERV", this.app.form ( "GET_SC724_FR" ).getDoubleItem ( "SSNO_ENCARGADO" ));
    this.dm.setField ( this.dm.get ( "RECLA_RETRO_TABLE_DSD" ), "COD_SERVICIO", this.app.form ( "GET_SC724_FR" ).getStringItem ( "SERVICIO" ));
    this.dm.setField ( this.dm.get ( "RECLA_RETRO_TABLE_DSD" ), "ACCION", this.app.form ( "GET_SC724_FR" ).getStringItem ( "ACCION" ));
    this.dm.setField ( this.dm.get ( "RECLA_RETRO_TABLE_DSD" ), "FECHA_IDENTIFICADO", this.app.form ( "GET_SC724_FR" ).getDateItem ( "FECHA_ID" ));
    this.dm.setField ( this.dm.get ( "RECLA_RETRO_TABLE_DSD" ), "STATUS_AUTORIZACION", "AUTO" );
 
    STATUS_CODE  = this.dm.limitQueryFromBuffer ( OPEN_ID );
    STATUS_CODE  = this.dm.retrieve ( OPEN_ID );

    STATUS_CODE  = this.dm.firstRow ( OPEN_ID );

    if ( Compare.equals ( STATUS_CODE, 0 ) ) 
    {
      this._condition5 = true;
    }
    else
    {
      this._condition5 = false;
    }
    if ( this._condition5 )
    {
      if ( ( Compare.gt ( this.app.NUM_FACTURA_GBL, 0 ) ) && ( Compare.le ( this.dm.getFieldDouble ( this.dm.get ( "RECLA_RETRO_TABLE_DSD" ), "NUMERO_FACTURA" ), 0 ) )  ) 
      {
        this._condition6 = true;
      }
      else
      {
        this._condition6 = false;
      }
      if ( this._condition6 )
      {
        this.app.FCH_FACTURA_GBL = this.app.SYSTEM_DATE;
        if ( ! Compare.equals ( this.dm.getFieldString ( this.dm.get ( "RECLA_RETRO_TABLE_DSD" ), "STATUS" ), "PENDCOBR" ) ) 
        {
          this.dm.setField ( this.dm.get ( "RECLA_RETRO_TABLE_DSD" ), "STATUS", "FACTURA1" );
        }
        this.dm.setField ( this.dm.get ( "RECLA_RETRO_TABLE_DSD" ), "NUMERO_FACTURA", this.app.NUM_FACTURA_GBL );
        this.dm.setField ( this.dm.get ( "RECLA_RETRO_TABLE_DSD" ), "FCH_TRANSACCION", this.app.SYSTEM_DATE );

        STATUS_CODE  = this.dm.update ( OPEN_ID );

        STATUS_CODE  = this.dm.dbCommit ( );
        STATUS_CODE  = this.dm.dbClose ( OPEN_ID );

        this.app.RR_ACCION_GBL = this.app.ACCION_GBL;
        this.app.RR_FCH_IDN = this.app.FCH_FINAL_GBL;
        this.app.FECHA_PLUS_15_GBL = MathService.plus ( this.app.SYSTEM_DATE, 15  );
        this.app.printChain ( "SC724_PKT;DSS109_REC_PKT" );
        this.app.printChain ( "ADSEF_DIP_2_PKT" );

        return;
      }
    }
  }


  /**
   *
   */
  protected void step6 ( ParameterSet ps )
  {
    if ( this._condition5 )    //    if ( Compare.equals ( STATUS_CODE, 0 ) ) 
    {
      if ( this._condition6 )    //      if ( ( Compare.gt ( this.app.NUM_FACTURA_GBL, 0 ) ) && ( Compare.le ( this.dm.getFieldDouble ( this.dm.get ( "RECLA_RETRO_TABLE_DSD" ), "NUMERO_FACTURA" ), 0 ) )  ) 
      {
      }
      else
      {
        STATUS_CODE  = this.dm.dbClose ( OPEN_ID );
      }
    }
    this.app.returnTo ( "RECLA_NOTI_MENU" ); if ( true ) return;
  }
}



/* ---------------------------------------------------------------------


     
PROCEDURE SC724_PERSONA_ADL;
VAR
   open_id      :number;
   status_code  :number;
   open_id2     :number;
   status_ID2   :number;
   open_id3     :number;
   status_ID3   :number;
   TYPED_KEY    :NUMBER(6,0);
   COUNTER      :NUMBER;
BEGIN
SET_TRACE();
        typed_key := get_cmd();
        if typed_key = ABORTACTION THEN
                RETURN;
        NUM_FACTURA_GBL := 0;
        ss_jefe_familia_gbl := get_sc724_fr.ssno_jefe;
        ss_jefe_servicio_gbl := get_sc724_fr.ssno_encargado;
        cod_servicio_gbl := get_sc724_fr.servicio;
        accion_gbl := get_sc724_fr.accion;
        fch_final_gbl := get_sc724_fr.fecha_id;
        FCH_FACTURA_GBL:=TO_DATE('');
        FCH_FACTURA_GBL:=SYSTEM_DATE;

        db_open(SC724_READ_DSD,open_id,status_code);
        db_reset(open_id,status_code);

        SC724_READ_DSD.RECLA_RETRO_TBL_SEGURO_SOCIAL_JEFE_FAM := get_sc724_fr.ss
no_jefe;
        SC724_READ_DSD.RECLA_RETRO_TBL_SEGURO_SOCIAL_JEFE_serv:= get_sc724_fr.ss
no_encargado;
        SC724_READ_DSD.cod_servicio := get_sc724_fr.servicio;
        SC724_READ_DSD.RECLA_RETRO_TBL_ACCION:= get_sc724_fr.accion;
        SC724_READ_DSD.RECLA_RETRO_TBL_FECHA_IDENTIFICADO :=get_sc724_fr.fecha_i
d;
        SC724_READ_DSD.RECLA_RETRO_TBL_RMO_OFICINA:=RMO_GBL;
        SC724_READ_DSD.CLIENTES_RMO_OFICINA:=RMO_GBL;
        db_query(open_id,status_code);
        db_get_first(open_id,status_code);

        if (status_code = 0) and (SC724_READ_DSD.STATUS = 'NOGESCOB')
        then
           begin
                db_close(open_id,status_code);
                CALL DSS109_REC_MNU_ADL;
                RETURN_TO RECLA_NOTI_MENU;
           end;
        {endif}


        if (status_code = 0) and ((SC724_READ_DSD.STATUS_AUTORIZACION = 'PAUT')
        OR (SC724_READ_DSD.STATUS_AUTORIZACION = 'REEV'))
        then
           BEGIN
                db_close(open_id,status_code);
                call sc724_pkt;
                CALL DSS109_REC_MNU_ADL;
           end;
        else
        begin
        db_close(open_id,status_code);

        db_open(SC724_READ_DSD,open_id,status_code);
        db_reset(open_id,status_code);

        SC724_READ_DSD.RECLA_RETRO_TBL_SEGURO_SOCIAL_JEFE_FAM := get_sc724_fr.ss
no_jefe;
        SC724_READ_DSD.RECLA_RETRO_TBL_SEGURO_SOCIAL_JEFE_serv:= get_sc724_fr.ss
no_encargado;
        SC724_READ_DSD.cod_servicio := get_sc724_fr.servicio;
        SC724_READ_DSD.RECLA_RETRO_TBL_ACCION:= get_sc724_fr.accion;
        SC724_READ_DSD.RECLA_RETRO_TBL_FECHA_IDENTIFICADO :=get_sc724_fr.fecha_i
d;
        SC724_READ_DSD.STATUS_AUTORIZACION := 'AUTO';
        SC724_READ_DSD.RECLA_RETRO_TBL_RMO_OFICINA:=RMO_GBL;
        SC724_READ_DSD.CLIENTES_RMO_OFICINA:=RMO_GBL;
        
        db_query(open_id,status_code);
        db_get_first(open_id,status_code);
        if status_code = 0 THEN
                IF  SC724_READ_DSD.FACTURA > 0 THEN
                   begin
                        db_close(open_id,status_code);
                        db_open(FACTURAS_DSD,open_id3,status_id3);
                        db_reset(open_id3,status_id3);
                        
                        facturas_dsd.seguro_social_jefe_fam     :=      get_sc72
4_fr.ssno_jefe;
                        facturas_dsd.seguro_social_jefe_serv    :=      get_sc72
4_fr.ssno_encargado;
                        facturas_dsd.cod_servicio               :=      get_sc72
4_fr.servicio;
                        facturas_dsd.fecha_identificado         :=      get_sc72
4_fr.fecha_id;
                        FACTURAS_DSD.RMO_OFICINA                :=      RMO_GBL;
                        db_query(open_id3,status_id3);
                        db_get_first(open_id3,status_ID3);
                        if status_id3 = 0 then
                                fch_factura_gbl         :=      FACTURAS_DSD.FCH
_FACTURA;
                        db_close(open_id3,status_id3);          
                        COUNTER := 0;
{               WHILE COUNTER < 5
                        DO BEGIN}

                             call sc724_pkt;
                            
                             
{                    COUNTER := COUNTER+1;
                END;}
{               CALL DSS109_REC_MNU_ADL;}
                        CALL DSS109_REC_MNU_ADL;
                   end;
                ELSE
                    BEGIN
                        IF  SC724_READ_DSD.STATUS='SALDRETR' THEN
                            BEGIN
                                    db_close(open_id,status_code);
                                    FCH_FACTURA_GBL:=SYSTEM_DATE;
                                    CALL DSS109_REC_MNU_ADL;
                            END;
                         ELSE
                            BEGIN
                                db_close(open_id,status_code);
                                call GET_SC724_FACTURA_PKT;
                            END;
                    END;
        else
            begin
                error(1071);
                return;
            end;
        end;

        db_open(RECLA_RETRO_TABLE_DSD,open_id,status_code);
        db_reset(open_id,status_code);

        
        RECLA_RETRO_TABLE_DSD.SEGURO_SOCIAL_JEFE_FAM := get_sc724_fr.ssno_jefe;
        RECLA_RETRO_TABLE_DSD.SEGURO_SOCIAL_JEFE_serv:= get_sc724_fr.ssno_encarg
ado;
        RECLA_RETRO_TABLE_DSD.cod_servicio := get_sc724_fr.servicio;
        RECLA_RETRO_TABLE_DSD.ACCION:= get_sc724_fr.accion;
        RECLA_RETRO_TABLE_DSD.FECHA_IDENTIFICADO :=get_sc724_fr.fecha_id;
        RECLA_RETRO_TABLE_DSD.STATUS_AUTORIZACION := 'AUTO';
        RECLA_RETRO_TABLE_DSD.RMO_OFICINA:=RMO_GBL;
        db_query(open_id,status_code);
        db_get_first(open_id,status_code);
        if status_code = 0 THEN 
                if (NUM_FACTURA_GBL > 0) and (RECLA_RETRO_TABLE_DSD.NUMERO_FACTU
RA <= 0  ) THEN
                          begin
                                FCH_FACTURA_GBL:=SYSTEM_DATE;
                                if (RECLA_RETRO_TABLE_DSD.STATUS <> 'PENDCOBR')
                                then
                                begin
                                        RECLA_RETRO_TABLE_DSD.STATUS := 'FACTURA
1';

                                end;
                                {endif}
                                RECLA_RETRO_TABLE_DSD.NUMERO_FACTURA := NUM_FACT
URA_GBL;
                                RECLA_RETRO_TABLE_DSD.FCH_TRANSACCION := SYSTEM_
DATE;
                                db_UPDATE(open_id,status_code);
                                db_commit(status_CODE);
                                db_close(open_id,status_code);
                                call sc724_pkt;
                        
                                CALL DSS109_REC_MNU_ADL;
                          end;
                else
                        db_close(open_id,status_code);

RETURN_TO RECLA_NOTI_MENU;
SET_NOTRACE();
end;


    



--------------------------------------------------------------------- */
